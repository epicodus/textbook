<% Section.all.each do |section| %>
  <div class="col-xs-3 lesson-type" id="section-<%= section.id %>-lesson-type">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">
          <p><%= section.course.name %></p>
          <%= section.name %>
        </h3>
      </div>
      <div class="panel-body">
        <%= f.fields_for :lesson_sections, LessonSection.find_or_initialize_by(lesson: @lesson, section: section) do |ff| %>
          <%= ff.hidden_field :section_id, value: section.id %>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :work_type_lesson do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:work_type) %>
                  <%= ff.radio_button :work_type, :lesson %>Lesson
                <% else %>
                  <%= ff.radio_button :work_type, :lesson, checked: false %>Lesson
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :work_type_exercise do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:work_type) %>
                  <%= ff.radio_button :work_type, :exercise %>Exercise
                <% else %>
                  <%= ff.radio_button :work_type, :exercise, checked: false %>Exercise
                <% end %>
              <% end %>
            </div>
          </div>

          <hr>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :day_of_week_weekend do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:day_of_week) %>
                  <%= ff.radio_button :day_of_week, :weekend %>Weekend
                <% else %>
                  <%= ff.radio_button :day_of_week, :weekend, checked: false %>Weekend
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :day_of_week_monday do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:day_of_week) %>
                  <%= ff.radio_button :day_of_week, :monday %>Monday
                <% else %>
                  <%= ff.radio_button :day_of_week, :monday, checked: false %>Monday
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :day_of_week_tuesday do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:day_of_week) %>
                  <%= ff.radio_button :day_of_week, :tuesday %>Tuesday
                <% else %>
                  <%= ff.radio_button :day_of_week, :tuesday, checked: false %>Tuesday
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :day_of_week_wednesday do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:day_of_week) %>
                  <%= ff.radio_button :day_of_week, :wednesday %>Wednesday
                <% else %>
                  <%= ff.radio_button :day_of_week, :wednesday, checked: false %>Wednesday
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :day_of_week_thursday do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:day_of_week) %>
                  <%= ff.radio_button :day_of_week, :thursday %>Thursday
                <% else %>
                  <%= ff.radio_button :day_of_week, :thursday, checked: false %>Thursday
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :day_of_week_friday do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:day_of_week) %>
                  <%= ff.radio_button :day_of_week, :friday %>Friday
                <% else %>
                  <%= ff.radio_button :day_of_week, :friday, checked: false %>Friday
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :day_of_week_saturday do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:day_of_week) %>
                  <%= ff.radio_button :day_of_week, :saturday %>Saturday
                <% else %>
                  <%= ff.radio_button :day_of_week, :saturday, checked: false %>Saturday
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="form-group">
            <div class="radio">
              <%= ff.label :day_of_week_sunday do %>
                <% if LessonSection.find_by(section: section, lesson: @lesson).try(:day_of_week) %>
                  <%= ff.radio_button :day_of_week, :sunday %>Sunday
                <% else %>
                  <%= ff.radio_button :day_of_week, :sunday, checked: false %>Sunday
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
